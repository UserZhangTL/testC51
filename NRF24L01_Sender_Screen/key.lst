C51 COMPILER V9.53.0.0   KEY                                                               07/20/2016 14:44:22 PAGE 1   


C51 COMPILER V9.53.0.0, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN key.obj
COMPILER INVOKED BY: C:\Keil_MDK\C51\BIN\C51.EXE nine_key\key.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\delay;.\uart;.\NRF24L0
                    -1__Sender;.\nine_key;.\HandSignal) DEBUG OBJECTEXTEND PRINT(.\key.lst) TABS(2) OBJECT(key.obj)

line level    source

   1          #include <reg52.h>
   2          #include "key.h"
   3          #include "delay.h"
   4          
   5          /*
   6          6个端口    L是列，H是行
   7           */
   8          sbit L3 = P0^0;
   9          sbit L2 = P0^1;
  10          sbit L1 = P0^2;
  11          sbit H1 = P0^3;
  12          sbit H2 = P0^4;
  13          sbit H3 = P0^5;   
  14          
  15          
  16          /****************************************************************
  17          * @name unsigned char Key_Scan()
  18          * @brief 程序的作用是按键值扫描函数
  19          * @param  command：void
  20          * @return status ：扫键值
  21          *****************************************************************/
  22          
  23          unsigned int Key_Scan()
  24          {
  25   1        H1 = 1;
  26   1        H2 = 1;
  27   1        H3 = 1;
  28   1        L1 = 0;
  29   1        L2 = 0;
  30   1        L3 = 0;
  31   1        
  32   1        if((L1 != 0) || (L2 != 0) || (L3 != 0) || (H1 != 1) || (H2 != 1) || (H3 != 1))      //说明有键按下
  33   1        {
  34   2          delay_ms(10);
  35   2          if((L1 != 0) || (L2 != 0) || (L3 != 0) || (H1 != 1) || (H2 != 1) || (H3 != 1))  //确实有键按下
  36   2          {
  37   3            /*扫描第一行*/
  38   3            L1 = 0;
  39   3            L2 = 1;
  40   3            L3 = 1;
  41   3            H1 = 1;
  42   3            H2 = 1;
  43   3            H3 = 1;
  44   3                
  45   3            if((L1 != 0) || (L2 != 1) || (L3 != 1)|| (H1 != 1) || (H2 != 1) || (H3 != 1))
  46   3            {
  47   4              H1 = H1;
  48   4                    H2 = H2;
  49   4                    H3 = H3;
  50   4                    L1 = 0;
  51   4                    L2 = 1;
  52   4                    L3 = 1;
  53   4              if((H1 == 0) && (H2 == 1) && (H3 == 1))           //led第一列
  54   4              {
C51 COMPILER V9.53.0.0   KEY                                                               07/20/2016 14:44:22 PAGE 2   

  55   5                return 7;
  56   5                      }
  57   4              else if((H1 == 1) && (H2 == 0) && (H3 == 1))
  58   4              {
  59   5                return 4;
  60   5                      }
  61   4              else if((H1 == 1) && (H2 == 1) && (H3 == 0))
  62   4              {
  63   5                return 1;
  64   5                      }
  65   4              
  66   4                  }
  67   3            /*扫描第二行*/
  68   3            L1 = 1;
  69   3            L2 = 0;
  70   3            L3 = 1;
  71   3            H1 = 1;
  72   3            H2 = 1;
  73   3            H3 = 1;
  74   3            
  75   3            if((L1 != 1) || (L2 != 0) || (L3 != 1) || (H1 != 1) || (H2 != 1) || (H3 != 1))
  76   3            {
  77   4              H1 = H1;
  78   4                    H2 = H2;
  79   4                    H3 = H3;
  80   4                    L1 = 1;
  81   4                    L2 = 0;
  82   4                    L3 = 1;
  83   4              
  84   4              if((H1 == 0) && (H2 == 1) && (H3 == 1))      //led第二列
  85   4              {
  86   5                return 8;
  87   5                      }
  88   4              else if((H1 == 1) && (H2 == 0) && (H3 == 1))
  89   4              {
  90   5                return 5;
  91   5                      }
  92   4              else if((H1 == 1) && (H2 == 1) && (H3 == 0))
  93   4              {
  94   5                return 2;
  95   5                      }
  96   4                  }
  97   3            /*扫描第三行*/
  98   3            L1 = 1;
  99   3            L2 = 1;
 100   3            L3 = 0;
 101   3            H1 = 1;
 102   3            H2 = 1;
 103   3            H3 = 1;
 104   3            
 105   3            if((L1 != 1) || (L2 != 1) || (L3 != 0) || (H1 != 1) || (H2 != 1) || (H3 != 1))
 106   3            {
 107   4              H1 = H1;
 108   4                    H2 = H2;
 109   4                    H3 = H3;
 110   4                    L1 = 1;
 111   4                    L2 = 1;
 112   4                    L3 = 0;
 113   4              if((H1 == 0) && (H2 == 1) && (H3 == 1))   //led第三列
 114   4              {
 115   5                return 9;
 116   5                      }
C51 COMPILER V9.53.0.0   KEY                                                               07/20/2016 14:44:22 PAGE 3   

 117   4              else if((H1 == 1) && (H2 == 0) && (H3 == 1))
 118   4              {
 119   5                return 6;
 120   5                      }
 121   4              else if((H1 == 1) && (H2 == 1) && (H3 == 0))
 122   4              {
 123   5                return 3;
 124   5                      }
 125   4      
 126   4                  }
 127   3              }
 128   2          }
 129   1        return 0;
 130   1        
 131   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    333    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
